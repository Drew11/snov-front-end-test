(window["webpackJsonpsnov-front-end-test"]=window["webpackJsonpsnov-front-end-test"]||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),c=n(5),a=n.n(c),o=n(1),i=(n(31),n(10)),u=n.n(i),l=n(14),m=n(15),p=n(16),f=n(19),v=n(17),E=n(20);var d=function(e){var t=e.user,n=e.style,r=e.setActiveUser;return s.a.createElement("li",{className:n,onClick:function(){return r(t)}},s.a.createElement("div",{className:"user-photo"}),s.a.createElement("span",null,t.name))};var b=Object(o.b)(function(e){return{users:e.users,posts:e.posts,activeUser:e.activeUser}},function(e){return{setActiveUser:function(t){return e({type:"SET_ACTIVE_USER",activeUser:t})}}})(function(e){var t=e.users,n=(e.posts,e.activeUser),r=e.setActiveUser,c=n?"":"active_user";return s.a.createElement("ul",{className:"app-users-list"},s.a.createElement("li",{className:c,onClick:function(){r(null)}},s.a.createElement("div",{className:"user-photo ilex"}),"All Subscriptions"),t.map(function(e,t){return s.a.createElement(d,{style:n===e?"active_user":"",key:t,user:e,setActiveUser:r})}))}),h=n(3);var y=Object(o.b)(function(e){return{comments:e.comments}},function(e){return{setEditingComment:function(t,n){return e({type:"SET_EDIT_COMMENT",editingComment:t,indexComment:n})},removeComment:function(t){return e({type:"REMOVE_COMMENT",indexComment:t})}}})(function(e){var t=e.comment,n=e.comments,c=e.setEditingComment,a=e.removeComment,o=Object(r.useState)(!1),i=Object(h.a)(o,2),u=i[0],l=i[1],m=Object(r.useState)(""),p=Object(h.a)(m,2),f=p[0],v=p[1],E=n.indexOf(t),d=n[E];return s.a.createElement("li",{className:"user-post-added-comment"},t.text,s.a.createElement("div",{className:"remove-comment",onClick:function(){return a(E)}}),s.a.createElement("div",{className:"post-comment-edit"},u?s.a.createElement("div",{className:"editing-comment"},s.a.createElement("input",{className:"editing-comment-input",type:"text",defaultValue:d.text,onChange:function(e){v(e.target.value)}}),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){var e;""!==(e=f)?(c(e,E),v(""),l(!u)):l(!u)}},"Save"),s.a.createElement("button",{onClick:function(){v(""),l(!u)}},"Cancel"))):s.a.createElement("span",{className:"comment-edit",onClick:function(){return l(!u)}},"Edit")))});var O=Object(o.b)(function(e){return{comments:e.comments}},function(e){return{addComment:function(t){return e({type:"ADD_COMMENT",comment:t})}}})(function(e){var t,n=e.id,c=e.comments,a=e.addComment,o=Object(r.useState)(""),i=Object(h.a)(o,2),u=i[0],l=i[1],m=c.filter(function(e){return e.id===n});return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"user-post-comment-caption"},"Comments"),s.a.createElement("ul",{className:"user-post-comments"},m.map(function(e,t){return s.a.createElement(y,{key:t,comment:e})})),s.a.createElement("form",{className:"user-post-set-comment"},s.a.createElement("input",{ref:function(e){return t=e},placeholder:"Type your message",onChange:function(e){l(e.target.value),e.preventDefault()}}),s.a.createElement("button",{onClick:function(e){return function(e,r){e.preventDefault(),""!==r&&(a({id:n,text:u}),l(""),t.value="")}(e,u)}},"Add")))});var S=Object(o.b)(function(e){return{comments:e.comments}})(function(e){var t=e.post,n=e.comments,r=e.style,c=(e.activePost,e.setActivePost),a=n.filter(function(e){return e.id===t.id}).length;return s.a.createElement("li",{className:r},s.a.createElement("div",null,s.a.createElement("span",{className:"user-post-title"},t.title),s.a.createElement("span",{className:"user-post-content"},t.body),s.a.createElement("div",{className:"user-post-comments-footer"},s.a.createElement("div",{className:"user-post-open-comments",onClick:function(){c("user-post-active"===r?null:t)}}),s.a.createElement("div",{className:"user-post-quantity-comments"},a||null))),"user-post-active"===r?s.a.createElement(O,{id:t.id}):null)});var j=Object(o.b)(function(e){return{visiblePosts:e.visiblePosts}})(function(e){var t=e.visiblePosts,n=Object(r.useState)(null),c=Object(h.a)(n,2),a=c[0],o=c[1];function i(e,t){return t&&e.id===t.id?"user-post-active":"user-post"}return s.a.createElement("ul",{className:"post-list"},t.map(function(e){return s.a.createElement(S,{key:e.id,post:e,style:i(e,a),setActivePost:o})}))});var C=Object(o.b)(null,function(e){return{setSearchQuery:function(t){return e({type:"SET_SEARCH_QUERY",searchQuery:t})}}})(function(e){var t=e.setSearchQuery;return s.a.createElement("div",{className:"right-block-search"},s.a.createElement("input",{className:"search",type:"text",onChange:function(e){var n=e.target.value.toLowerCase();t(n)}}))}),N=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark(function e(){var t,n,r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/posts");case 2:return t=e.sent,e.next=5,fetch("https://jsonplaceholder.typicode.com/users");case 5:return n=e.sent,e.next=8,t.json();case 8:return r=e.sent,e.next=11,n.json();case 11:s=e.sent,this.props.setUsers(s),this.props.setPosts(r),this.props.setVisiblePosts(r);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t,n=this;this.props.activeUser===e.activeUser&&this.props.searchQuery===e.searchQuery||(t=this.props.activeUser?this.props.posts.filter(function(e){return e.title.includes(n.props.searchQuery)}).filter(function(e){return e.userId===n.props.activeUser.id}):this.props.posts.filter(function(e){return e.title.includes(n.props.searchQuery)}),this.props.setVisiblePosts(t))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("main",null,s.a.createElement("div",{className:"left-block"},s.a.createElement("a",{href:"https://drew11.github.io/snov-front-end-test/"},s.a.createElement("div",{className:"left-block-logo"})),s.a.createElement("span",{className:"left-block-caption"},"Subscriptions"),s.a.createElement(b,null)),s.a.createElement("div",{className:"right-block"},s.a.createElement(C,null),s.a.createElement(j,null))))}}]),t}(s.a.Component),g=Object(o.b)(function(e){return{activeUser:e.activeUser,posts:e.posts,searchQuery:e.searchQuery}},function(e){return{setUsers:function(t){return e({type:"SET_USERS",users:t})},setPosts:function(t){return e({type:"SET_POSTS",posts:t})},setVisiblePosts:function(t){return e({type:"SET_VISIBLE_POSTS",visiblePosts:t})}}})(N),P=n(11),T=n(18),U=n(6);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){Object(T.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=Object(U.b)(function(e,t){switch(t.type){case"SET_USERS":return k({},e,{users:t.users});case"SET_POSTS":return k({},e,{posts:t.posts});case"SET_VISIBLE_POSTS":return k({},e,{visiblePosts:t.visiblePosts});case"SET_ACTIVE_USER":return k({},e,{activeUser:t.activeUser});case"SET_SEARCH_QUERY":return k({},e,{searchQuery:t.searchQuery});case"ADD_COMMENT":var n=Object(P.a)(e.comments);return n.push(t.comment),k({},e,{comments:n});case"SET_EDIT_COMMENT":var r=e.comments.map(function(e,n){var r=k({},e);return n===t.indexComment&&(r.text=t.editingComment),r});return k({},e,{comments:r});case"REMOVE_COMMENT":return k({},e,{comments:Object(P.a)(e.comments).filter(function(e,n){return n!==t.indexComment})});default:return e}},{users:[],posts:[],visiblePosts:[],activeUser:null,searchQuery:"",comments:[]});x.subscribe(function(){return console.log(x.getState())});var w=x;a.a.render(s.a.createElement(o.a,{store:w},s.a.createElement(g,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.597f5787.chunk.js.map